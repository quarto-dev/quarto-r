<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get path relative to project root (Quarto-aware) — project_path • quarto</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get path relative to project root (Quarto-aware) — project_path"><meta name="description" content="
This function constructs file paths relative to the project root when
running in a Quarto context (using QUARTO_PROJECT_ROOT or QUARTO_PROJECT_DIR
environment variables), or falls back to intelligent project root detection
when not in a Quarto context.
It is experimental and subject to change in future releases. The automatic
project root detection may not work reliably in all contexts, especially when
projects have complex directory structures or when running in non-standard
environments. For a more explicit and potentially more robust approach,
consider using here::i_am() to declare your project structure,
followed by here::here() for path construction. See examples for comparison."><meta property="og:description" content="
This function constructs file paths relative to the project root when
running in a Quarto context (using QUARTO_PROJECT_ROOT or QUARTO_PROJECT_DIR
environment variables), or falls back to intelligent project root detection
when not in a Quarto context.
It is experimental and subject to change in future releases. The automatic
project root detection may not work reliably in all contexts, especially when
projects have complex directory structures or when running in non-standard
environments. For a more explicit and potentially more robust approach,
consider using here::i_am() to declare your project structure,
followed by here::here() for path construction. See examples for comparison."><meta property="og:image" content="https://quarto-dev.github.io/quarto-r/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">quarto</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.4.9026</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/advanced-vignettes.html">Custom Quarto Formats For Vignettes</a></li>
    <li><a class="dropdown-item" href="../articles/dynamic-metadata.html">Dynamic Metadata in Quarto Documents</a></li>
    <li><a class="dropdown-item" href="../articles/hello-pdf.pdf">Quarto PDF Vignettes (PDF)</a></li>
    <li><a class="dropdown-item" href="../articles/hello.html">Quarto HTML Vignettes</a></li>
    <li><a class="dropdown-item" href="../articles/markdown-html-tables.html">Using Markdown in HTML Tables</a></li>
    <li><a class="dropdown-item" href="../articles/publishing.html">Publishing</a></li>
    <li><a class="dropdown-item" href="../articles/r-scripts.html">Working with R Scripts</a></li>
    <li><a class="dropdown-item" href="../articles/theme-helpers.html">Theme Helpers</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/quarto-dev/quarto-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get path relative to project root (Quarto-aware)</h1>
      <small class="dont-index">Source: <a href="https://github.com/quarto-dev/quarto-r/blob/main/R/utils-projects.R" class="external-link"><code>R/utils-projects.R</code></a></small>
      <div class="d-none name"><code>project_path.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>This function constructs file paths relative to the project root when
running in a Quarto context (using <code>QUARTO_PROJECT_ROOT</code> or <code>QUARTO_PROJECT_DIR</code>
environment variables), or falls back to intelligent project root detection
when not in a Quarto context.</p>
<p>It is experimental and subject to change in future releases. The automatic
project root detection may not work reliably in all contexts, especially when
projects have complex directory structures or when running in non-standard
environments. For a more explicit and potentially more robust approach,
consider using <code>here::i_am()</code> to declare your project structure,
followed by <code>here::here()</code> for path construction. See examples for comparison.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">project_path</span><span class="op">(</span><span class="va">...</span>, root <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Character vectors of path components to be joined</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>Project root directory. If <code>NULL</code> (default), automatic detection
is used following the hierarchy described above</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the normalized file path relative to the project root.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function uses the following fallback hierarchy to determine the project root:</p><ul><li><p>Quarto environment variables set during Quarto commands (e.g., <code>quarto render</code>):</p><ul><li><p><code>QUARTO_PROJECT_ROOT</code> environment variable (set by Quarto commands)</p></li>
<li><p><code>QUARTO_PROJECT_DIR</code> environment variable (alternative Quarto variable)</p></li>
</ul></li>
<li><p>Fallback to intelligent project root detection using <code><a href="https://rdrr.io/pkg/xfun/man/proj_root.html" class="external-link">xfun::proj_root()</a></code> for interactive sessions:</p><ul><li><p><code>_quarto.yml</code> or <code>_quarto.yaml</code> (Quarto project files)</p></li>
<li><p><code>DESCRIPTION</code> file with <code>Package:</code> field (R package or Project)</p></li>
<li><p><code>.Rproj</code> files with <code>Version:</code> field (RStudio projects)</p></li>
</ul></li>
</ul><p>Last fallback is the current working directory if no project root can be determined.
A warning is issued to alert users that behavior may differ between interactive use and Quarto rendering,
as in this case the computed path may be wrong.</p>
    </div>
    <div class="section level2">
    <h2 id="use-in-quarto-document-cells">Use in Quarto document cells<a class="anchor" aria-label="anchor" href="#use-in-quarto-document-cells"></a></h2>



<p>This function is particularly useful in Quarto document cells where you want to
use a path relative to the project root dynamically during rendering.</p>
<p></p><div class="sourceCode markdown"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>``<span class="in">`{r}`</span>r ''`</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a> # Get a csv path from data directory in the Quarto project root</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a> data &lt;- project_path("data", "my_data.csv")</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="in">```</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code>here::here()</code> and <code>here::i_am()</code> for a similar function that works with R projects</p></li>
<li><p><code><a href="find_project_root.html">find_project_root()</a></code> to search for Quarto Project configuration in parents directories</p></li>
<li><p><code><a href="get_running_project_root.html">get_running_project_root()</a></code> for detecting the project root in Quarto commands</p></li>
<li><p><code><a href="https://rdrr.io/pkg/xfun/man/from_root.html" class="external-link">xfun::from_root()</a></code> for the underlying path construction</p></li>
<li><p><code><a href="https://rdrr.io/pkg/xfun/man/proj_root.html" class="external-link">xfun::proj_root()</a></code> for project root detection logic</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create a dummy Quarto project structure for example</span></span></span>
<span class="r-in"><span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"quarto_project"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">tmpdir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">quarto</span><span class="fu">::</span><span class="fu"><a href="quarto_create_project.html">quarto_create_project</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">'test project'</span>, type <span class="op">=</span> <span class="st">'blog'</span>,</span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">tmpdir</span>, no_prompt <span class="op">=</span> <span class="cn">TRUE</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">project_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmpdir</span>, <span class="st">"test project"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate working within a blog post</span></span></span>
<span class="r-in"><span><span class="fu">xfun</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xfun/man/in_dir.html" class="external-link">in_dir</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">project_dir</span>, <span class="st">"posts"</span>, <span class="st">"welcome"</span><span class="op">)</span>, <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Reference a data file from project root</span></span></span>
<span class="r-in"><span>  <span class="co"># ../../data/my_data.csv</span></span></span>
<span class="r-in"><span>  <span class="fu">quarto</span><span class="fu">::</span><span class="fu">project_path</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"my_data.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Reference a script from project root</span></span></span>
<span class="r-in"><span>  <span class="co"># ../../R/analysis.R</span></span></span>
<span class="r-in"><span>  <span class="fu">quarto</span><span class="fu">::</span><span class="fu">project_path</span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"analysis.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Explicitly specify root (overrides automatic detection)</span></span></span>
<span class="r-in"><span>  <span class="co"># ../../data/file.csv</span></span></span>
<span class="r-in"><span>  <span class="fu">quarto</span><span class="fu">::</span><span class="fu">project_path</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"file.csv"</span>, root <span class="op">=</span> <span class="st">"../.."</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Alternative approach using here::i_am() (potentially more robust)</span></span></span>
<span class="r-in"><span>  <span class="co"># This approach requires you to declare where you are in the project:</span></span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"here"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># Declare that this document is in the project root or subdirectory</span></span></span>
<span class="r-in"><span>    <span class="fu">here</span><span class="fu">::</span><span class="fu">i_am</span><span class="op">(</span><span class="st">"posts/welcome/index.qmd"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># Now here::here() will work reliably from the project root</span></span></span>
<span class="r-in"><span>    <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"my_data.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"analysis.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by JJ Allaire, Christophe Dervieux, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

